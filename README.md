# Movie Streaming Platform Qiwi

В этом проекте я попытался за короткий срок использовать максимум технологий и концепций которые я узнал на стажировке.

Тип проекта : Микросервисная система потокового медиа-сервиса

Цель проекта : Создание масштабируемой платформы для загрузки, обработки и стриминга видеофайлов с поддержкой аутентификации и управления каталогом.

Основные технологии :

* Docker & Docker Compose — для контейнеризации и оркестрации сервисов
* Django — API-сервисы
* JS + HTML — клиентская часть
* RabbitMQ — асинхронная обработка
* FFmpeg — транскодирование видео
* Nginx — проксирование, кэширование и маршрутизация
* FTP-сервер — хранение медиафайлов

Набросок схемы бэкенда:


<img width="851" height="761" alt="image" src="https://github.com/user-attachments/assets/39b3dc14-f67d-428e-afc3-2e964bd36099" />


## Возможности API бекенда, реализованные во фронтенде

 - [x] Добавление фильмов, жанров
 - [x] Загрузка фильмов, трейлеров, постеров на файл сервер
 - [x] Загрузка фильмов, трейлеров, постеров с файл сервера
 - [x] Асинхронное перекодирование видео в различные разрешения/битрейты
 - [x] Просмотр трейлеров (коротких видео) в формате mp4
 - [x] Просмотр фильмов используя HLS. Допускается изменения разрешения пользователем, а также автоматический подбор разрешения.
 - [x] JWT авторизация 
 - [x] Просмотр каталога фильмов
 - [ ]  Сортировка по различным критериям (не хватило времени реализовать во фронте, есть на беке)

## Технологии примененные на бекенде ( о которых рассказывалось на стажировке)
### Брокер сообщений:
Обработка видео - крайне трудоемкий для железа процесс, в данном случае брокер сообщений позволяет асинхронно обрабатывать запросы на транскодирование, не задерживая пользователя

### Master - Slave хранилища
Есть мастер сервер  - ftp сервер, загрузка на него происходит с помощью file service, и  film transcoder service. Чтение с него не осуществляется, осуществляется только репликация на ftp-proxy. Если файла нет на ftp-proxy он попробует найти его в ftp-server.

### Маршрутизация
Для маршртизации на разных уровнях я использую ngnix, который помогает изолировать компоненты отдельные микросервисы от внешних воздействий, увеличивая безопасность программы.

### Api Gateway
Был реализован для балансировки данных между различными файл серверами. Но так как я не нашел удобного health check для ftp серверов, данная идея была отложена ненадолго.




