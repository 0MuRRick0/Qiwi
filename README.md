# Movie Streaming Platform Qiwi

В этом проекте я попытался за короткий срок использовать максимум технологий и концепций которые я узнал на стажировке.

Тип проекта : Микросервисная система потокового медиа-сервиса

Цель проекта : Создание масштабируемой платформы для загрузки, обработки и стриминга видеофайлов с поддержкой аутентификации и управления каталогом.

Основные технологии :

* Docker & Docker Compose — для контейнеризации и оркестрации сервисов
* Django — API-сервисы
* JS + HTML — клиентская часть
* RabbitMQ — асинхронная обработка
* FFmpeg — транскодирование видео
* Nginx — проксирование, кэширование и маршрутизация
* FTP-сервер — хранение медиафайлов
* PostgreSQL - база данных

Набросок схемы бэкенда:


![Backend](https://github.com/user-attachments/assets/3a5d0904-e165-4e6b-9dae-71c618303459)


## Возможности API бекенда, реализованные во фронтенде

 - [x] Добавление фильмов, жанров
 - [x] Загрузка фильмов, трейлеров, постеров на файл сервер
 - [x] Загрузка фильмов, трейлеров, постеров с файл сервера
 - [x] Асинхронное перекодирование видео в различные разрешения/битрейты
 - [x] Просмотр трейлеров (коротких видео) в формате mp4
 - [x] Просмотр фильмов используя HLS. Допускается изменения разрешения пользователем, а также автоматический подбор разрешения.
 - [x] JWT авторизация 
 - [x] Просмотр каталога фильмов
 - [x]  Сортировка по различным критериям

## Технологии примененные на бекенде ( о которых рассказывалось на стажировке)
### Брокер сообщений:
Обработка видео - крайне трудоемкий для железа процесс, в данном случае брокер сообщений позволяет асинхронно обрабатывать запросы на транскодирование, не задерживая пользователя

### Master - Slave хранилища
Есть мастер сервер  - ftp сервер, загрузка на него происходит с помощью file service, и  film transcoder service. Чтение с него не осуществляется, осуществляется только репликация на ftp-proxy. Если файла нет на ftp-proxy он попробует найти его в ftp-server. Такое решение обусловлено тем, что в сервисе просмотра фильмов, нагрузка на запись новых фильмов чрезвычайно мала по сравнению с нагрузкой на чтение. Так что решение, где у одного master сервера может быть множество slav'ов предоставляет масштабируемость системы.

### Маршрутизация
Для маршртизации на разных уровнях я использую ngnix, который помогает изолировать компоненты отдельные микросервисы от внешних воздействий, увеличивая безопасность программы.

### Api Gateway
Был реализован для балансировки данных между различными файл серверами. Но так как я не нашел удобного health check для ftp серверов, данная идея была отложена ненадолго.

P.S

Для тестирования адмиских функций используйте следующего юзера

Email: superuser@admin.ru

Password: superpassword


# Превью

## Главная страница (вид от лица админа)

<img width="1831" height="996" alt="image" src="https://github.com/user-attachments/assets/c907b643-4294-4a8e-b7c2-ea158af33ead" />

## Страница фильма (вид от лица админа)

<img width="1847" height="943" alt="image" src="https://github.com/user-attachments/assets/347818cf-13ed-4469-b6f4-9c98b895dd46" />

## Страница с плеером

<img width="1829" height="843" alt="image" src="https://github.com/user-attachments/assets/cdc5880b-e03f-481d-8f0d-5209d131d4c8" />

## Добавление фильма (доступно только админам)

<img width="715" height="989" alt="image" src="https://github.com/user-attachments/assets/60b4421e-04ec-47c2-a783-3f217e1e2454" />

## Редактирование фильма (доступно тольок админам)

<img width="1832" height="1007" alt="image" src="https://github.com/user-attachments/assets/0cb5d72d-0404-495d-ade6-a1777bac8621" />

## Авторизация

<img width="550" height="287" alt="image" src="https://github.com/user-attachments/assets/38f7b698-2da7-4da0-9011-45dacbe114dc" />/

## Регистрация

<img width="492" height="465" alt="image" src="https://github.com/user-attachments/assets/725d3de6-f406-45d4-93f3-6f4fae2a342b" />








